
$g.pushScope ()

//#include <stdio.h>

  $g.defsynonym identity âŸ¨function â€œidentityâ€
                                   âŸ¨*od âŸ¨char @Â¹ _ _âŸ©âŸ© // param - c
                                   âŸ¨*od âŸ¨char @Â¹ _ _âŸ©âŸ©âŸ© // return type - char
    
     $g.pushScope (identity) 
//char identity (char c) {
     $g.defsynonym c âŸ¨char @Â¹ param 1âŸ©âŸ© 
     $s.ensureInScope c 
     $ir.beginFunction identity 
//  return c;
     $ir.return c
//}
     $g.popScope () 
     $ir.endFunction identity

//int main (int argc, char **argv) {
  $g.defsynonym main âŸ¨function â€œmainâ€
                               âŸ¨*od âŸ¨int @Â¹ _ _âŸ©âŸ¨char @Â² _ _âŸ©âŸ© // params - argc, argv
                               âŸ¨*od âŸ¨void _ _ _âŸ©âŸ©âŸ© // return type - none (void) 
    $g.pushScope (main) 
      $g.defsynonym â€œargcâ€ âŸ¨int @Â¹ param 1âŸ©âŸ© 
      $g.defsynonym â€œargvâ€ âŸ¨char @Â² param 2âŸ©âŸ© 
      $ir.beginFunction â€œmainâ€ 2 
//  char x = identity ('x');
      $s.ensureInScope x 
      $s.ensureInScope identity 
      $s.ensureType identity âŸ¨function _ âŸ¨*od âŸ¨char @Â¹ _ _âŸ©âŸ© âŸ¨*od âŸ¨char @Â¹ _ _âŸ©âŸ©âŸ© 
      $g.defsynonym x âŸ¨char @Â¹ temp 1âŸ©âŸ© 
      $ir.resetArgs 
      $ir.mutate x âŸ¨char @â° temp â€œxâ€âŸ©  
      $ir.pushArg x
      $ir.defsynonym ğœ0 âŸ¨char @Â¹ temp 2âŸ© 
      $ir.createTemp ğœ0
      $ir.call identity
      $ir.mutate ğœ0 âŸ¨char @Â¹ result 1âŸ© 
//  printf ("result = %c\n", x);
      $s.ensureInScope x 
      $s.ensureInScope printf 
      $g.defsynonym printf âŸ¨bifunction _ âŸ¨*od âŸ¨char @Â¹ _ _âŸ© âŸ¨varargs _ _ _âŸ©âŸ© âŸ¨*od âŸ¨void _ _ _âŸ©âŸ©âŸ© 
      $s.ensureType printf âŸ¨bifunction _ âŸ¨*od âŸ¨char @Â¹ _ _âŸ© âŸ¨varargs _ _ _âŸ©âŸ© âŸ¨*od âŸ¨void _ _ _âŸ©âŸ©âŸ© 
      $ir.resetArgs 
      $ir.defsynonym ğœ1 âŸ¨char @Â¹ temp 2âŸ© 
      $ir.createTemp ğœ1
      $ir.mutate ğœ1 âŸ¨char @â° temp â€œresult = %c\nâ€âŸ© 
      $ir.pushArg ğœ1
      $ir.pushArg x 
      $ir.call printf 
      $ir.mutate ğœ1 âŸ¨char @Â¹ result 1âŸ© 
      $ir.return âŸ¨void _ _ _âŸ© 
//}
    $g.popScope 
      $ir.endFunction â€œmainâ€ 2 
